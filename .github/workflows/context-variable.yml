name: 04. Context Variables Demo

on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main]
  workflow_dispatch:

jobs:
  basic-context:
    name: ê¸°ë³¸ Context ë³€ìˆ˜
    runs-on: ubuntu-latest

    step:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Github Context ì¶œë ¥í•˜ê¸°
        run: |
          echo "=== Github Context ë³€ìˆ˜ë“¤ ==="
          echo "ì €ì¥ì†Œ ì´ë¦„: ${{ github.repository}}"
          echo "ë¸Œëœì¹˜ ì´ë¦„: ${{ github.ref_name}}"

          echo "ì»¤ë°‹í•´ì‹œ : ${{github.sha}}"
          echo "ì´ë²¤íŠ¸ íƒ€ì… : ${{github.event_name}}"
          echo "ì‹¤í–‰ì : ${{github.actor}}"

      - name: Runner Context ì¶œë ¥í•˜ê¸°
        run: |
          echo "=== Runner Context ë³€ìˆ˜ë“¤ ==="
          echo "ìš´ì˜ì²´ì œ: ${{ runner.os }}"
          echo "ì‘ì—… ë””ë ‰í† ë¦¬: ${{ runner.workspace }}"

  branch-specific:
    name: ë¸Œëœì¹˜ë³„ ë™ì‘
    runs-on: ubuntu-latest
    needs: basic-context

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Main ë¸Œëœì¹˜ ì‘ì—…
        if: github.ref_name == 'main'
        run: |
          echo "Main ë¸Œëœì¹˜ì—ì„œ ì‹¤í–‰ ì¤‘"
          echo "ì´ê³³ì—ì„œëŠ” ë°°í¬ ì‘ì—…ì„ í•©ë‹ˆë‹¤"

      - name: Develop ë¸Œëœì¹˜ ì‘ì—…
        if: github.ref_name == 'develop'
        runs: |
          echo "develop ë¸Œëœì¹˜ì—ì„œ ì‹¤í–‰ ì¤‘"
          echo "ì´ê³³ì—ì„œëŠ” í…ŒìŠ¤íŠ¸ ì‘ì—…ì„ í•©ë‹ˆë‹¤"

      - name: Feature ë¸Œëœì¹˜ ì‘ì—…
        if: github.ref_name == 'feature'
        runs: |
          echo "ì´ê³³ì—ì„œëŠ” ê°œë°œ ì‘ì—…ì„ í•©ë‹ˆë‹¤"

  event-specific:
    name: ì´ë²¤íŠ¸ë³„ ë™ì‘
    runs-on: ubuntu-latest
    needs: basic-context

    steps:
      - name: Checkout code
        uses: actions/checkout@4

      - name: Push ì´ë²¤íŠ¸ ì²˜ë¦¬
        if: github.event_name == 'push'
        run: |
          echo "ğŸ“¤ Push ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"
          echo "ì»¤ë°‹ ë©”ì‹œì§€: ${{ github.event.head_commit.message }}"

      - name: Pull Request ì´ë²¤íŠ¸ ì²˜ë¦¬
        if: github.event_name == 'pull_request'
        run: |
          echo "ğŸ“ Pull Request ì´ë²¤íŠ¸ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"
          echo "PR ì œëª©: ${{ github.event.pull_request.title }}"
          echo "PR ë²ˆí˜¸: ${{ github.event.pull_request.number }}"

      - name: ìˆ˜ë™ ì‹¤í–‰ ì²˜ë¦¬
        if: github.event_name == 'workflow_dispatch'
        run: |
          echo "ğŸ‘† ìˆ˜ë™ìœ¼ë¡œ ì‹¤í–‰í–ˆìŠµë‹ˆë‹¤"
          echo "ì‹¤í–‰ì: ${{ github.actor }}"
